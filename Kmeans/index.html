<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/Mein-Logo.png"/>
	 <link rel="shortcut icon" href="/img/Mein-Logo.png">
	
			
    <title>
    Learn in Life
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
    
    	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>

			    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
<link rel="stylesheet" href="/css/prism-okaidia.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_coy.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">EvilPerfectionist</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">主页</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">分类</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="category-link" href="/categories/Diary/">Diary</a></li><li><a class="category-link" href="/categories/Machine-Learning/">Machine Learning</a></li><li><a class="category-link" href="/categories/OpenCV/">OpenCV</a></li><li><a class="category-link" href="/categories/OpenCV/C/">C++</a></li><li><a class="category-link" href="/categories/Summary/">Summary</a></li><li><a class="category-link" href="/categories/Travel/">Travel</a>
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/about/" title="简历">
		                简历
		            </a>
		        </li>
		        
		        <li>
		            <a href="/group/" title="团队">
		                团队
		            </a>
		        </li>
		        
		        <li>
		            <a href="/gallery/" title="图库">
		                图库
		            </a>
		        </li>
		        
		        <li>
		            <a href="/tag/" title="标签">
		                标签
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
		            
		                <li><a href="https://github.com/EvilPerfectionist" class="icon fa-github"><span class="label">GitHub</span></a></li>
		            
		            
		            
		            
			</ul>
</nav>

        <div id="main" >
            <div class ="post_page_title_img" style="height: 25rem;background-image: url(http://ox8ixvjau.bkt.clouddn.com/blog/171216/5cKiLk40Ie.jpg);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;" >
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2 >Kmeans</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <h2 id="Preface"><a href="#Preface" class="headerlink" title=" Preface "></a><font color="#0099ff"><center> Preface </center></font></h2><p>Kmeans is an unsupervised learning algorithm. This algorithm can classify the same data into different groups. At the beginning, you should know how many groups you are willing to separate your data into. In this way, the number of clusters(centroids) can be determined. Then, we use the iteration method to find the reasonable positions of the centroids.</p>
<h2 id="The-Principle-of-Kmeans"><a href="#The-Principle-of-Kmeans" class="headerlink" title=" The Principle of Kmeans "></a><font color="red"><center> The Principle of Kmeans </center></font></h2><p>Actually, the principle of Kmeans is very simple. You can either learn them by the video from Andrew Ng or search some tutorials and explanations like <a href="https://mubaris.com/2017/10/01/kmeans-clustering-in-python/" target="_blank" rel="noopener"><font color="cyan">this one</font></a> and <a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_ml/py_kmeans/py_kmeans_understanding/py_kmeans_understanding.html" target="_blank" rel="noopener"><font color="cyan">this one.</font></a></p>
<h2 id="Descriptions-of-Some-Examples-in-Detail"><a href="#Descriptions-of-Some-Examples-in-Detail" class="headerlink" title=" Descriptions of Some Examples in Detail "></a><font color="#ff3399"><center> Descriptions of Some Examples in Detail </center></font></h2><h3 id="Color-Quantization"><a href="#Color-Quantization" class="headerlink" title="Color Quantization"></a><font color="tomato">Color Quantization</font></h3><p>The codes is all from <a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_ml/py_kmeans/py_kmeans_understanding/py_kmeans_understanding.html" target="_blank" rel="noopener"><font color="cyan">this website:</font></a></p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> cv2

img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'4.jpg'</span><span class="token punctuation">)</span>
Z <span class="token operator">=</span> img<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># convert to np.float32</span>
Z <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span>Z<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># define criteria, number of clusters(K) and apply kmeans()</span>
criteria <span class="token operator">=</span> <span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>TERM_CRITERIA_EPS <span class="token operator">+</span> cv2<span class="token punctuation">.</span>TERM_CRITERIA_MAX_ITER<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span>
K <span class="token operator">=</span> <span class="token number">2</span>
ret<span class="token punctuation">,</span>label<span class="token punctuation">,</span>center<span class="token operator">=</span>cv2<span class="token punctuation">.</span>kmeans<span class="token punctuation">(</span>Z<span class="token punctuation">,</span>K<span class="token punctuation">,</span>None<span class="token punctuation">,</span>criteria<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>KMEANS_RANDOM_CENTERS<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>center<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># Now convert back into uint8, and make original image</span>
center <span class="token operator">=</span> np<span class="token punctuation">.</span>uint8<span class="token punctuation">(</span>center<span class="token punctuation">)</span>
res <span class="token operator">=</span> center<span class="token punctuation">[</span>label<span class="token punctuation">.</span>flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
res2 <span class="token operator">=</span> res<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token punctuation">)</span>

cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'res2'</span><span class="token punctuation">,</span>res2<span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="http://ox8ixvjau.bkt.clouddn.com/blog/171216/Che9HKh9jj.png?imageslim" alt="mark"><br>Let me do some explanations about the codes: There are 3 features, say, R,G,B. So we need to reshape the image to an array of Mx3 size (M is number of pixels in image). And after the clustering, we apply centroid values (it is also R,G,B) to all pixels, such that resulting image will have specified number of colors. And again we need to reshape it back to the shape of original image.</p>
<p>It is obvious that the function cv2.kmeans is very important, you can learn this function from the image below:</p>
<p><img src="http://ox8ixvjau.bkt.clouddn.com/blog/171216/fDma385G2i.png?imageslim" alt="mark"></p>
<p>I use print function to let you better know what the output parameters include (Assuming that k=2):</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># The result of print(center)</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span>  <span class="token number">77.909729</span>     <span class="token number">77.34547424</span>   <span class="token number">83.28701019</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span> <span class="token number">202.06881714</span>  <span class="token number">199.72377014</span>  <span class="token number">205.21600342</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token comment" spellcheck="true"># The result of print(label)</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>
 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token comment" spellcheck="true"># The result of print(res)</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token number">77</span>  <span class="token number">77</span>  <span class="token number">83</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span> <span class="token number">77</span>  <span class="token number">77</span>  <span class="token number">83</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span> <span class="token number">77</span>  <span class="token number">77</span>  <span class="token number">83</span><span class="token punctuation">]</span>
 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>
 <span class="token punctuation">[</span><span class="token number">202</span> <span class="token number">199</span> <span class="token number">205</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token number">202</span> <span class="token number">199</span> <span class="token number">205</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token number">202</span> <span class="token number">199</span> <span class="token number">205</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>So the function returns the RGB values of the two centroids to parameter center.</p>
<p>flatten() returns a copy of the array collapsed into one dimension.</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">a <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token function">array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>The result will be array([1, 2, 3, 4]).</p>
<p>So, you should know why the result of print will be like this.</p>
<h3 id="Data-with-Only-One-Feature"><a href="#Data-with-Only-One-Feature" class="headerlink" title="Data with Only One Feature"></a><font color="tomato">Data with Only One Feature</font></h3><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> cv2
<span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt

x <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">175</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span>
z <span class="token operator">=</span> np<span class="token punctuation">.</span>hstack<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span>
z <span class="token operator">=</span> z<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
z <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span>z<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># Define criteria = ( type, max_iter = 10 , epsilon = 1.0 )</span>
criteria <span class="token operator">=</span> <span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>TERM_CRITERIA_EPS <span class="token operator">+</span> cv2<span class="token punctuation">.</span>TERM_CRITERIA_MAX_ITER<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Set flags (Just to avoid line break in the code)</span>
flags <span class="token operator">=</span> cv2<span class="token punctuation">.</span>KMEANS_RANDOM_CENTERS

<span class="token comment" spellcheck="true"># Apply KMeans</span>
compactness<span class="token punctuation">,</span>labels<span class="token punctuation">,</span>centers <span class="token operator">=</span> cv2<span class="token punctuation">.</span>kmeans<span class="token punctuation">(</span>z<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span>None<span class="token punctuation">,</span>criteria<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span>flags<span class="token punctuation">)</span>

A <span class="token operator">=</span> z<span class="token punctuation">[</span>labels<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">]</span>
B <span class="token operator">=</span> z<span class="token punctuation">[</span>labels<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>centers<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># Now plot 'A' in red, 'B' in blue, 'centers' in yellow</span>
plt<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>A<span class="token punctuation">,</span><span class="token number">256</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">,</span>color <span class="token operator">=</span> <span class="token string">'r'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>B<span class="token punctuation">,</span><span class="token number">256</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">,</span>color <span class="token operator">=</span> <span class="token string">'b'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>centers<span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">,</span>color <span class="token operator">=</span> <span class="token string">'y'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>The result will be:</p>
<p><img src="http://ox8ixvjau.bkt.clouddn.com/blog/171217/9DejjKdg1m.png?imageslim" alt="mark"></p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token punctuation">[</span><span class="token punctuation">[</span>  <span class="token number">64.76000214</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span> <span class="token number">212.08000183</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>The detailed explanations about this block of code can be found <a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_ml/py_kmeans/py_kmeans_opencv/py_kmeans_opencv.html" target="_blank" rel="noopener"><font color="cyan">here.</font></a> There is one function I want to explain here—plt.hist().</p>
<pre class="line-numbers language-python"><code class="language-python">numpy<span class="token punctuation">.</span>histogram<span class="token punctuation">(</span>a<span class="token punctuation">,</span> bins<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> range<span class="token operator">=</span>None<span class="token punctuation">,</span> normed<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> weights<span class="token operator">=</span>None<span class="token punctuation">,</span> density<span class="token operator">=</span>None<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>A, B, centers are the parameter a, which stand for the data we want to plot.</p>
<p>256, 256, 32 are the parameter bins, which means the x axis is divided in 256, 256, 32 boxes.</p>
<p>The range is from 0 to 256.</p>
<h3 id="Data-with-Multiple-Features"><a href="#Data-with-Multiple-Features" class="headerlink" title="Data with Multiple Features"></a><font color="tomato">Data with Multiple Features</font></h3><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> cv2
<span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt

X <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Y <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">85</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Z <span class="token operator">=</span> np<span class="token punctuation">.</span>vstack<span class="token punctuation">(</span><span class="token punctuation">(</span>X<span class="token punctuation">,</span>Y<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># convert to np.float32</span>
Z <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span>Z<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># define criteria and apply kmeans()</span>
criteria <span class="token operator">=</span> <span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>TERM_CRITERIA_EPS <span class="token operator">+</span> cv2<span class="token punctuation">.</span>TERM_CRITERIA_MAX_ITER<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span>
ret<span class="token punctuation">,</span>label<span class="token punctuation">,</span>center<span class="token operator">=</span>cv2<span class="token punctuation">.</span>kmeans<span class="token punctuation">(</span>Z<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span>None<span class="token punctuation">,</span>criteria<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>KMEANS_RANDOM_CENTERS<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>label<span class="token punctuation">.</span>ravel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># Now separate the data, Note the flatten()</span>
A <span class="token operator">=</span> Z<span class="token punctuation">[</span>label<span class="token punctuation">.</span>ravel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">]</span>
B <span class="token operator">=</span> Z<span class="token punctuation">[</span>label<span class="token punctuation">.</span>ravel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>B<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># Plot the data</span>
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>A<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>A<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>B<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>B<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>c <span class="token operator">=</span> <span class="token string">'r'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>center<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>center<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>s <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">,</span>c <span class="token operator">=</span> <span class="token string">'y'</span><span class="token punctuation">,</span> marker <span class="token operator">=</span> <span class="token string">'s'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Height'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Weight'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Below is the result:<br><img src="http://ox8ixvjau.bkt.clouddn.com/blog/171217/mjdg47LBJj.png?imageslim" alt="mark"><br>There is one function I want to explain here—plt.scatter().</p>
<p>A[:,0], B[:,0], center[:,0] are values of x.<br>A[:,1], B[:,1], center[:,1] are values of y.<br>s=80 mean the size of the point is 80.</p>
<h3 id="A-Example-Using-Kmeans-with-C"><a href="#A-Example-Using-Kmeans-with-C" class="headerlink" title="A Example Using Kmeans with C"></a><font color="tomato">A Example Using Kmeans with C</font></h3><p>The codes are from a book called Learning <em>OpenCV_ Computer Vision with the OpenCV Library</em>.</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"cv.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"highgui.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cmath></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"cxcore.h"</span></span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token macro property">#<span class="token directive keyword">define</span> MAX_CLUSTERS 5</span>
    CvScalar color_tab<span class="token punctuation">[</span>MAX_CLUSTERS<span class="token punctuation">]</span><span class="token punctuation">;</span>
    IplImage<span class="token operator">*</span> img <span class="token operator">=</span> <span class="token function">cvCreateImage</span><span class="token punctuation">(</span><span class="token function">cvSize</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CvRNG rng <span class="token operator">=</span> <span class="token function">cvRNG</span><span class="token punctuation">(</span><span class="token number">0xffffffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color_tab<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">CV_RGB</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color_tab<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">CV_RGB</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color_tab<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">CV_RGB</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color_tab<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">CV_RGB</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color_tab<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">CV_RGB</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">cvNamedWindow</span><span class="token punctuation">(</span><span class="token string">"clusters"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> k<span class="token punctuation">,</span> cluster_count <span class="token operator">=</span> <span class="token function">cvRandInt</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rng<span class="token punctuation">)</span> <span class="token operator">%</span> MAX_CLUSTERS <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> i<span class="token punctuation">,</span> sample_count <span class="token operator">=</span> <span class="token function">cvRandInt</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rng<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">1000</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        CvMat<span class="token operator">*</span> points <span class="token operator">=</span> <span class="token function">cvCreateMat</span><span class="token punctuation">(</span>sample_count<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> CV_32FC2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        CvMat<span class="token operator">*</span> clusters <span class="token operator">=</span> <span class="token function">cvCreateMat</span><span class="token punctuation">(</span>sample_count<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> CV_32SC1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">/* generate random sample from multivariate
        Gaussian distribution */</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> cluster_count<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            CvPoint center<span class="token punctuation">;</span>
            CvMat point_chunk<span class="token punctuation">;</span>
            center<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token function">cvRandInt</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rng<span class="token punctuation">)</span> <span class="token operator">%</span> img<span class="token operator">-</span><span class="token operator">></span>width<span class="token punctuation">;</span>
            center<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token function">cvRandInt</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rng<span class="token punctuation">)</span> <span class="token operator">%</span> img<span class="token operator">-</span><span class="token operator">></span>height<span class="token punctuation">;</span>
            <span class="token function">cvGetRows</span><span class="token punctuation">(</span>points<span class="token punctuation">,</span> <span class="token operator">&amp;</span>point_chunk<span class="token punctuation">,</span>
                k<span class="token operator">*</span>sample_count <span class="token operator">/</span> cluster_count<span class="token punctuation">,</span>
                k <span class="token operator">==</span> cluster_count <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">?</span> sample_count <span class="token operator">:</span>
                <span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>sample_count <span class="token operator">/</span> cluster_count<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">cvRandArr</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rng<span class="token punctuation">,</span> <span class="token operator">&amp;</span>point_chunk<span class="token punctuation">,</span> CV_RAND_NORMAL<span class="token punctuation">,</span>
                <span class="token function">cvScalar</span><span class="token punctuation">(</span>center<span class="token punctuation">.</span>x<span class="token punctuation">,</span> center<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">cvScalar</span><span class="token punctuation">(</span>img<span class="token operator">-</span><span class="token operator">></span>width <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">,</span> img<span class="token operator">-</span><span class="token operator">></span>height <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment" spellcheck="true">/* shuffle samples */</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sample_count <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            CvPoint2D32f<span class="token operator">*</span> pt1 <span class="token operator">=</span> <span class="token punctuation">(</span>CvPoint2D32f<span class="token operator">*</span><span class="token punctuation">)</span>points<span class="token operator">-</span><span class="token operator">></span>data<span class="token punctuation">.</span>fl <span class="token operator">+</span>
                <span class="token function">cvRandInt</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rng<span class="token punctuation">)</span> <span class="token operator">%</span> sample_count<span class="token punctuation">;</span>
            CvPoint2D32f<span class="token operator">*</span> pt2 <span class="token operator">=</span> <span class="token punctuation">(</span>CvPoint2D32f<span class="token operator">*</span><span class="token punctuation">)</span>points<span class="token operator">-</span><span class="token operator">></span>data<span class="token punctuation">.</span>fl <span class="token operator">+</span>
                <span class="token function">cvRandInt</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rng<span class="token punctuation">)</span> <span class="token operator">%</span> sample_count<span class="token punctuation">;</span>
            CvPoint2D32f temp<span class="token punctuation">;</span>
            <span class="token function">CV_SWAP</span><span class="token punctuation">(</span><span class="token operator">*</span>pt1<span class="token punctuation">,</span> <span class="token operator">*</span>pt2<span class="token punctuation">,</span> temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">cvKMeans2</span><span class="token punctuation">(</span>points<span class="token punctuation">,</span> cluster_count<span class="token punctuation">,</span> clusters<span class="token punctuation">,</span>
            <span class="token function">cvTermCriteria</span><span class="token punctuation">(</span>CV_TERMCRIT_EPS <span class="token operator">+</span> CV_TERMCRIT_ITER<span class="token punctuation">,</span>
                <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">cvZero</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sample_count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            CvPoint2D32f pt <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>CvPoint2D32f<span class="token operator">*</span><span class="token punctuation">)</span>points<span class="token operator">-</span><span class="token operator">></span>data<span class="token punctuation">.</span>fl<span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> cluster_idx <span class="token operator">=</span> clusters<span class="token operator">-</span><span class="token operator">></span>data<span class="token punctuation">.</span>i<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token function">cvCircle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token function">cvPointFrom32f</span><span class="token punctuation">(</span>pt<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span>
                color_tab<span class="token punctuation">[</span>cluster_idx<span class="token punctuation">]</span><span class="token punctuation">,</span> CV_FILLED<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">cvReleaseMat</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>points<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">cvReleaseMat</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>clusters<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">cvShowImage</span><span class="token punctuation">(</span><span class="token string">"clusters"</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> key <span class="token operator">=</span> <span class="token function">cvWaitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token number">27</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ‘ESC’</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Let me do some explanations about the codes:</p>
<p>CvRNG rng = cvRNG(0xffffffff); RNG implements a random number generator, rng is a RNG element initialized with the value 0xFFFFFFFF</p>
<p>There are several lines of code using funtion CvScalar ().</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">CvScalar color_tab<span class="token punctuation">[</span>MAX_CLUSTERS<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">cvScalar</span><span class="token punctuation">(</span>center<span class="token punctuation">.</span>x<span class="token punctuation">,</span> center<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token function">cvScalar</span><span class="token punctuation">(</span>img<span class="token operator">-</span><span class="token operator">></span>width <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">,</span> img<span class="token operator">-</span><span class="token operator">></span>height <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>In fact, CvScalar() is only a struct including a four length double Array.</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> CvScalar
<span class="token punctuation">{</span>
    <span class="token keyword">double</span> val<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>So, what is the purpose of using this funtion? Someone answers this question on Stackoverflow.</p>
<p><img src="http://ox8ixvjau.bkt.clouddn.com/blog/171217/BBgciCFKfg.png?imageslim" alt="mark"></p>
<p>Fuction GetRow(s) returns array row or row span.</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token function">cvGetRows</span><span class="token punctuation">(</span>points<span class="token punctuation">,</span> <span class="token operator">&amp;</span>point_chunk<span class="token punctuation">,</span>
                k<span class="token operator">*</span>sample_count <span class="token operator">/</span> cluster_count<span class="token punctuation">,</span>
                k <span class="token operator">==</span> cluster_count <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">?</span> sample_count <span class="token operator">:</span>
                <span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>sample_count <span class="token operator">/</span> cluster_count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>The first parameter is an input array. We input our samples here.</p>
<p>The second parameter is a pointer to the resulting sub-array header. That means we will select a special part of points and input it into point_chunk.</p>
<p>The third parameter is the zero-based index of the starting row (inclusive) of the span and the fourth is the zero-based index of the ending row (exclusive) of the span. This means that in fact we separate the points into cluster_count(number) parts and get the fist address of each part and then give them to &amp;point_chunk since k loops cluster_count(number) times.</p>
<p>Function cvRandArr fills an array with random numbers and updates the RNG state.</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token function">cvRandArr</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rng<span class="token punctuation">,</span> <span class="token operator">&amp;</span>point_chunk<span class="token punctuation">,</span> CV_RAND_NORMAL<span class="token punctuation">,</span>
                <span class="token function">cvScalar</span><span class="token punctuation">(</span>center<span class="token punctuation">.</span>x<span class="token punctuation">,</span> center<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">cvScalar</span><span class="token punctuation">(</span>img<span class="token operator">-</span><span class="token operator">></span>width <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">,</span> img<span class="token operator">-</span><span class="token operator">></span>height <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>The first parameter is a CvRNG state initialized by RNG().</p>
<p>The second parameter is the pointer of the destination array.</p>
<p>The third parameter stands for the distribution type. Here we choose CV_RAND_NORMAL which means normal or Gaussian distribution.</p>
<p>The fourth parameter, in the case of a normal distribution, it is the mean value of the random numbers.</p>
<p>The fifth parameter, in the case of a normal distribution, it is the standard deviation of the random numbers.</p>
<p>So, with the function cvGetRows, we gain cluster_count groups of data and with the function cvRandArr, we feed these data with random values, these values obey normal distribution. And they range in a rectangle whose four corner coordinates are (center.x-img-&gt;width / 6, center.y-img-&gt;height / 6), (center.x-img-&gt;width / 6, center.y+img-&gt;height / 6), (center.x+img-&gt;width / 6, center.y-img-&gt;height / 6), (center.x+img-&gt;width / 6, center.y+img-&gt;height / 6).</p>
<p>The codes below are used to shuffle samples:</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sample_count <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            CvPoint2D32f<span class="token operator">*</span> pt1 <span class="token operator">=</span> <span class="token punctuation">(</span>CvPoint2D32f<span class="token operator">*</span><span class="token punctuation">)</span>points<span class="token operator">-</span><span class="token operator">></span>data<span class="token punctuation">.</span>fl <span class="token operator">+</span>
                <span class="token function">cvRandInt</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rng<span class="token punctuation">)</span> <span class="token operator">%</span> sample_count<span class="token punctuation">;</span>
            CvPoint2D32f<span class="token operator">*</span> pt2 <span class="token operator">=</span> <span class="token punctuation">(</span>CvPoint2D32f<span class="token operator">*</span><span class="token punctuation">)</span>points<span class="token operator">-</span><span class="token operator">></span>data<span class="token punctuation">.</span>fl <span class="token operator">+</span>
                <span class="token function">cvRandInt</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rng<span class="token punctuation">)</span> <span class="token operator">%</span> sample_count<span class="token punctuation">;</span>
            CvPoint2D32f temp<span class="token punctuation">;</span>
            <span class="token function">CV_SWAP</span><span class="token punctuation">(</span><span class="token operator">*</span>pt1<span class="token punctuation">,</span> <span class="token operator">*</span>pt2<span class="token punctuation">,</span> temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Let us look at the definition of the CV_SWAP first:</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">define</span> CV_SWAP(a,b,t) ((t) = (a), (a) = (b), (b) = (t))</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>So, the temp is only used for transfer. We exchange the values of two random data using this block of code.</p>
<p>Then we use the codes below to draw some points on the image.</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sample_count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            CvPoint2D32f pt <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>CvPoint2D32f<span class="token operator">*</span><span class="token punctuation">)</span>points<span class="token operator">-</span><span class="token operator">></span>data<span class="token punctuation">.</span>fl<span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> cluster_idx <span class="token operator">=</span> clusters<span class="token operator">-</span><span class="token operator">></span>data<span class="token punctuation">.</span>i<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token function">cvCircle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token function">cvPointFrom32f</span><span class="token punctuation">(</span>pt<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span>
                color_tab<span class="token punctuation">[</span>cluster_idx<span class="token punctuation">]</span><span class="token punctuation">,</span> CV_FILLED<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>In this case, pt will be given a member of samples. In fact, we initiate points using CvMat<em> points = cvCreateMat(sample_count, 1, CV_32FC2); Here we can see that “points” is actually a pointer. It points to a sample. So we can give sample to pt using ((CvPoint2D32f</em>)points-&gt;data.fl)[i] since you can consider the content of a pointer as an array.</p>
<p>Then we use clusters-&gt;data.i[i] to obtain to index and draw the small colorful circle with cvCircle.</p>
<p>The parameter cvPointFrom32f(pt) means the enter of the circle and 2 is the radius of the circle.</p>
<h2 id="The-End"><a href="#The-End" class="headerlink" title="The End"></a><font color="yellowish"><center>The End</center></font></h2>
            </div>

            <!-- Post Comments -->
            
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #7EC0EE;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load" id="disqus_bt"> 
    <button class="disqus_click_btn">点击查看评论</button>
</div>

<!--
<script type="text/javascript">
$('.btn_click_load').click(function() {
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'http-miccall-tech'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    document.getElementById('disqus_bt').style.display = "none";
});
</script>
-->
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://yoursite.com/Kmeans/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://yoursite.com/Kmeans/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/javascript">
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//http-miccall-tech.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>


        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a href="https://evilperfectionist.github.io " style="border-bottom: none;">EvilPerfectionist</a></li>
            </ul>
            
            	<span id="busuanzi_container_site_pv">2017总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
</body>



 	
</html>
